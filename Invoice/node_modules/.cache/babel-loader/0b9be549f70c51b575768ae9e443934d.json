{"ast":null,"code":"import{useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import CAlert from\"src/Components/UI/Alert/CAlert\";import FormInputLabel from\"src/Components/UI/Input/FormInputLabel\";import FormSelect from\"src/Components/UI/Input/FormSelect\";import FormTextArea from\"src/Components/UI/Input/FormTextArea\";import CModal from\"src/Components/UI/Modal/CModal\";import useFormValidate from\"src/Hooks/input-validation\";import{closePostModal,deletePostModalData,updatePostModalData}from\"src/store/post.slice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostEditModal=function PostEditModal(){var _useFormValidate=useFormValidate(),athorName=_useFormValidate.inputValue,setAuthorName=_useFormValidate.setInputValue,authorNameChangeHandler=_useFormValidate.inputChangeHandler,authorNameBlurHandler=_useFormValidate.inputBlurHandler;var _useFormValidate2=useFormValidate(),postTitle=_useFormValidate2.inputValue,setPostTitle=_useFormValidate2.setInputValue,postTitleChangeHandler=_useFormValidate2.inputChangeHandler,postTitleBlurHandler=_useFormValidate2.inputBlurHandler;var _useFormValidate3=useFormValidate(),postContent=_useFormValidate3.inputValue,setPostContent=_useFormValidate3.setInputValue,postContentChangeHandler=_useFormValidate3.inputChangeHandler,postContentBlurHandler=_useFormValidate3.inputBlurHandler;var _useFormValidate4=useFormValidate(),postType=_useFormValidate4.inputValue,setType=_useFormValidate4.setInputValue,postTypeChangeHandler=_useFormValidate4.inputChangeHandler,postTypeBlurHandler=_useFormValidate4.inputBlurHandler;var mapStateToProps=function mapStateToProps(state){return{postModalData:state.postStore.postModalData,updatePostModalData:state.postStore.updatePostModalData};};var state=useSelector(mapStateToProps);useEffect(function(){if(state.postModalData.ModalAction===\"Update\"){setAuthorName(state.postModalData.postData.name);setPostTitle(state.postModalData.postData.title);setPostContent(state.postModalData.postData.content);setType(state.postModalData.postData.status);}},[state.postModalData,setAuthorName,setPostTitle,setPostContent,setType]);var dispatch=useDispatch();var onSubmitHandler=function onSubmitHandler(e){e.preventDefault();if(state.postModalData.ModalAction===\"Update\"){var data={id:state.postModalData.postId,title:postTitle,content:postContent,status:postType};dispatch(updatePostModalData(data));}else{var _data={id:state.postModalData.postId,action:state.postModalData.status};dispatch(deletePostModalData(_data));}};var modalCloseHandler=function modalCloseHandler(){dispatch(closePostModal());};return/*#__PURE__*/_jsxs(CModal,{onShow:state.postModalData.isModalOpen,heading:state.postModalData.ModalHeading,variant:state.postModalData.variant,showButton:state.postModalData.showButton,action:state.postModalData.ModalAction===\"Update\"?\"Update\":state.postModalData.ModalAction===\"success\"?\"success\":state.postModalData.status===\"active\"?\"Enable\":\"Disable\",onClose:modalCloseHandler,size:\"lg\",onSubmitHandler:onSubmitHandler,loading:state.updatePostModalData.isLoading,children:[state.updatePostModalData.isUpdated&&/*#__PURE__*/_jsx(CAlert,{color:state.updatePostModalData.variant,text:state.updatePostModalData.msg}),state.postModalData.ModalAction===\"Delete\"&&!state.updatePostModalData.isUpdated&&/*#__PURE__*/_jsx(CAlert,{color:state.postModalData.status===\"active\"?\"success\":\"danger\",text:state.postModalData.status===\"active\"?\"please confirm that you are going to ENABLE the post\":\"please confirm that you are going to DISABLE the post\"}),state.postModalData.ModalAction===\"Update\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormInputLabel,{type:\"text\",readOnly:true,label:\"Author Name\",value:athorName,change:authorNameChangeHandler,blur:authorNameBlurHandler}),/*#__PURE__*/_jsx(FormInputLabel,{type:\"text\",readOnly:false,label:\"Post Title\",value:postTitle,change:postTitleChangeHandler,blur:postTitleBlurHandler}),/*#__PURE__*/_jsx(FormTextArea,{type:\"textarea\",labelName:\"Post Content\",readOnly:false,rows:\"5\",change:postContentChangeHandler,value:postContent,blur:postContentBlurHandler}),/*#__PURE__*/_jsx(FormSelect,{label:\"Post Type\",value:postType,change:postTypeChangeHandler,options:[\"Publish\",\"Draft\"],blur:postTypeBlurHandler})]})]});};export default PostEditModal;/**\r\n * comments_count: \"12\"\r\ncontent: \"This is the sample Post. This is the sample Post. This is the sample Post. This is the sample Post. This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.\"\r\ncreated_at: \"2020-11-06T09:43:44.000000Z\"\r\nid: 4\r\nlikes_count: \"0\"\r\nname: \"Nishanthan\"\r\nstatus: \"publish\"\r\ntitle: \"3rd Post has been Updated\"\r\ntype: \"disabled\"\r\nupdated_at: \"2021-06-15T06:26:42.000000Z\"\r\nuser_id: \"1\"\r\n */","map":{"version":3,"sources":["C:/xampp/htdocs/nkItService/relax-frontend/src/Components/views/Posts/Modal/PostEditModal.js"],"names":["useEffect","useSelector","useDispatch","CAlert","FormInputLabel","FormSelect","FormTextArea","CModal","useFormValidate","closePostModal","deletePostModalData","updatePostModalData","PostEditModal","athorName","inputValue","setAuthorName","setInputValue","authorNameChangeHandler","inputChangeHandler","authorNameBlurHandler","inputBlurHandler","postTitle","setPostTitle","postTitleChangeHandler","postTitleBlurHandler","postContent","setPostContent","postContentChangeHandler","postContentBlurHandler","postType","setType","postTypeChangeHandler","postTypeBlurHandler","mapStateToProps","state","postModalData","postStore","ModalAction","postData","name","title","content","status","dispatch","onSubmitHandler","e","preventDefault","data","id","postId","action","modalCloseHandler","isModalOpen","ModalHeading","variant","showButton","isLoading","isUpdated","msg"],"mappings":"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","sourcesContent":["import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport CAlert from \"src/Components/UI/Alert/CAlert\";\r\nimport FormInputLabel from \"src/Components/UI/Input/FormInputLabel\";\r\nimport FormSelect from \"src/Components/UI/Input/FormSelect\";\r\nimport FormTextArea from \"src/Components/UI/Input/FormTextArea\";\r\nimport CModal from \"src/Components/UI/Modal/CModal\";\r\nimport useFormValidate from \"src/Hooks/input-validation\";\r\nimport {\r\n  closePostModal,\r\n  deletePostModalData,\r\n  updatePostModalData,\r\n} from \"src/store/post.slice\";\r\nconst PostEditModal = () => {\r\n  const {\r\n    inputValue: athorName,\r\n    setInputValue: setAuthorName,\r\n    inputChangeHandler: authorNameChangeHandler,\r\n    inputBlurHandler: authorNameBlurHandler,\r\n  } = useFormValidate();\r\n  const {\r\n    inputValue: postTitle,\r\n    setInputValue: setPostTitle,\r\n    inputChangeHandler: postTitleChangeHandler,\r\n    inputBlurHandler: postTitleBlurHandler,\r\n  } = useFormValidate();\r\n  const {\r\n    inputValue: postContent,\r\n    setInputValue: setPostContent,\r\n    inputChangeHandler: postContentChangeHandler,\r\n    inputBlurHandler: postContentBlurHandler,\r\n  } = useFormValidate();\r\n  const {\r\n    inputValue: postType,\r\n    setInputValue: setType,\r\n    inputChangeHandler: postTypeChangeHandler,\r\n    inputBlurHandler: postTypeBlurHandler,\r\n  } = useFormValidate();\r\n  const mapStateToProps = (state) => {\r\n    return {\r\n      postModalData: state.postStore.postModalData,\r\n      updatePostModalData: state.postStore.updatePostModalData,\r\n    };\r\n  };\r\n  const state = useSelector(mapStateToProps);\r\n  useEffect(() => {\r\n    if (state.postModalData.ModalAction === \"Update\") {\r\n      setAuthorName(state.postModalData.postData.name);\r\n      setPostTitle(state.postModalData.postData.title);\r\n      setPostContent(state.postModalData.postData.content);\r\n      setType(state.postModalData.postData.status);\r\n    }\r\n  }, [\r\n    state.postModalData,\r\n    setAuthorName,\r\n    setPostTitle,\r\n    setPostContent,\r\n    setType,\r\n  ]);\r\n  const dispatch = useDispatch();\r\n  const onSubmitHandler = (e) => {\r\n    e.preventDefault();\r\n    if (state.postModalData.ModalAction === \"Update\") {\r\n      const data = {\r\n        id: state.postModalData.postId,\r\n        title: postTitle,\r\n        content: postContent,\r\n        status: postType,\r\n      };\r\n      dispatch(updatePostModalData(data));\r\n    } else {\r\n      const data = {\r\n        id: state.postModalData.postId,\r\n        action: state.postModalData.status,\r\n      };\r\n\r\n      dispatch(deletePostModalData(data));\r\n    }\r\n  };\r\n\r\n  const modalCloseHandler = () => {\r\n    dispatch(closePostModal());\r\n  };\r\n  return (\r\n    <CModal\r\n      onShow={state.postModalData.isModalOpen}\r\n      heading={state.postModalData.ModalHeading}\r\n      variant={state.postModalData.variant}\r\n      showButton={state.postModalData.showButton}\r\n      action={\r\n        state.postModalData.ModalAction === \"Update\"\r\n          ? \"Update\"\r\n          : state.postModalData.ModalAction === \"success\"\r\n          ? \"success\"\r\n          : state.postModalData.status === \"active\"\r\n          ? \"Enable\"\r\n          : \"Disable\"\r\n      }\r\n      onClose={modalCloseHandler}\r\n      size=\"lg\"\r\n      onSubmitHandler={onSubmitHandler}\r\n      loading={state.updatePostModalData.isLoading}\r\n    >\r\n      {state.updatePostModalData.isUpdated && (\r\n        <CAlert\r\n          color={state.updatePostModalData.variant}\r\n          text={state.updatePostModalData.msg}\r\n        />\r\n      )}\r\n      {state.postModalData.ModalAction === \"Delete\" &&\r\n        !state.updatePostModalData.isUpdated && (\r\n          <CAlert\r\n            color={\r\n              state.postModalData.status === \"active\" ? \"success\" : \"danger\"\r\n            }\r\n            text={\r\n              state.postModalData.status === \"active\"\r\n                ? `please confirm that you are going to ENABLE the post`\r\n                : `please confirm that you are going to DISABLE the post`\r\n            }\r\n          />\r\n        )}\r\n      {state.postModalData.ModalAction === \"Update\" && (\r\n        <>\r\n          <FormInputLabel\r\n            type=\"text\"\r\n            readOnly={true}\r\n            label=\"Author Name\"\r\n            value={athorName}\r\n            change={authorNameChangeHandler}\r\n            blur={authorNameBlurHandler}\r\n          />\r\n          <FormInputLabel\r\n            type=\"text\"\r\n            readOnly={false}\r\n            label=\"Post Title\"\r\n            value={postTitle}\r\n            change={postTitleChangeHandler}\r\n            blur={postTitleBlurHandler}\r\n          />\r\n          <FormTextArea\r\n            type=\"textarea\"\r\n            labelName=\"Post Content\"\r\n            readOnly={false}\r\n            rows=\"5\"\r\n            change={postContentChangeHandler}\r\n            value={postContent}\r\n            blur={postContentBlurHandler}\r\n          ></FormTextArea>\r\n          <FormSelect\r\n            label=\"Post Type\"\r\n            value={postType}\r\n            change={postTypeChangeHandler}\r\n            options={[\"Publish\", \"Draft\"]}\r\n            blur={postTypeBlurHandler}\r\n          />\r\n        </>\r\n      )}\r\n    </CModal>\r\n  );\r\n};\r\nexport default PostEditModal;\r\n/**\r\n * comments_count: \"12\"\r\ncontent: \"This is the sample Post. This is the sample Post. This is the sample Post. This is the sample Post. This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.This is the sample Post.\"\r\ncreated_at: \"2020-11-06T09:43:44.000000Z\"\r\nid: 4\r\nlikes_count: \"0\"\r\nname: \"Nishanthan\"\r\nstatus: \"publish\"\r\ntitle: \"3rd Post has been Updated\"\r\ntype: \"disabled\"\r\nupdated_at: \"2021-06-15T06:26:42.000000Z\"\r\nuser_id: \"1\"\r\n */\r\n"]},"metadata":{},"sourceType":"module"}