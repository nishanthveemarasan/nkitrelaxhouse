{"ast":null,"code":"import _objectSpread from\"C:/xampp/htdocs/nkItService/relax-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{createSlice}from\"@reduxjs/toolkit\";import{sendGetAdminApi,sendPostApi}from\"src/service/appService\";import{loginStoreAction}from\"./store\";var initialState={isLoading:false,loggedInData:{userId:0,name:\"\",token:null,role_id:\"none\",isDataReceived:false,image:\"\",posts:0,comments:0,likes:0},message:{msg:\"\",color:\"\",isLoggedIn:false},admin:false};var loginSlice=createSlice({name:\"login\",initialState:initialState,reducers:{logout:function logout(state){state.loggedInData={userId:\"\",name:\"\",token:null,role_id:\"none\",image:\"\",posts:0,comments:0,likes:0};state.message={msg:\"\",color:\"\",isLoggedIn:false};},updateProfileImage:function updateProfileImage(state,action){state.loggedInData=_objectSpread(_objectSpread({},state.loggedInData),{},{image:action.payload.url});},sendLoginRequest:function sendLoginRequest(state){state.isLoading=true;state.message=_objectSpread(_objectSpread({},state.message),{},{msg:\"Authenticating......\",color:\"success\",isLoggedIn:true});},getLoginErrorResponse:function getLoginErrorResponse(state,action){state.isLoading=false;state.message=_objectSpread(_objectSpread({},state.message),{},{msg:action.payload.msg,color:action.payload.color,isLoggedIn:true});},getLoginSuccessResponse:function getLoginSuccessResponse(state,action){state.isLoading=false;state.message=_objectSpread(_objectSpread({},state.message),{},{msg:action.payload.msg,color:action.payload.color,isLoggedIn:true});state.loggedInData=_objectSpread(_objectSpread({},state.loggedInData),{},{name:action.payload.name,image:action.payload.image,role_id:action.payload.role_id,posts:action.payload.posts,comments:action.payload.comments,likes:action.payload.likes,userId:action.payload.userId});},updateToken:function updateToken(state,action){state.loggedInData=_objectSpread(_objectSpread({},state.loggedInData),{},{token:action.payload.token});},checkUserLoggedIn:function checkUserLoggedIn(state,action){state.loggedInData=_objectSpread(_objectSpread({},state.loggedInData),{},{name:action.payload.name,role_id:action.payload.role_id,isDataReceived:true,image:action.payload.image,posts:action.payload.posts,comments:action.payload.comments,likes:action.payload.likes,userId:action.payload.userId});}}});export default loginSlice;export var LoginRequest=function LoginRequest(data,history){return function(dispatch){dispatch(loginStoreAction.sendLoginRequest());sendPostApi(\"user/login\",data).then(function(response){localStorage.setItem(\"token\",response.data.data.token);dispatch(loginStoreAction.getLoginSuccessResponse({msg:\"Authentication Successfull:Rediracting to Admin Panel!!\",color:\"success\",name:response.data.data.name,role_id:response.data.data.roles,image:response.data.data.profile_photo_path,posts:response.data.data.posts,comments:response.data.data.comments,likes:response.data.data.likes,userId:response.data.data.id}));setTimeout(function(){dispatch(loginStoreAction.updateToken({token:response.data.data.token}));history.replace(\"/admin\");},2000);}).catch(function(error){dispatch(loginStoreAction.getLoginErrorResponse({msg:error.response.data.error,color:\"danger\"}));});};};export var logout=function logout(){return function(dispatch){localStorage.removeItem(\"token\");dispatch(loginStoreAction.logout());};};export var checkUser=function checkUser(history){return function(dispatch){sendGetAdminApi(\"users/get-a-user\").then(function(response){//console.log(\"hi\", response.data.data.id);\ndispatch(loginStoreAction.checkUserLoggedIn({name:response.data.data.name,role_id:response.data.data.roles,image:response.data.data.profile_photo_path,posts:response.data.data.posts_count,comments:response.data.data.comments_count,likes:response.data.data.likes_count,userId:response.data.data.id}));}).catch(function(error){history.push(\"/\");});};};","map":{"version":3,"sources":["C:/xampp/htdocs/nkItService/relax-frontend/src/store/login-store.js"],"names":["createSlice","sendGetAdminApi","sendPostApi","loginStoreAction","initialState","isLoading","loggedInData","userId","name","token","role_id","isDataReceived","image","posts","comments","likes","message","msg","color","isLoggedIn","admin","loginSlice","reducers","logout","state","updateProfileImage","action","payload","url","sendLoginRequest","getLoginErrorResponse","getLoginSuccessResponse","updateToken","checkUserLoggedIn","LoginRequest","data","history","dispatch","then","response","localStorage","setItem","roles","profile_photo_path","id","setTimeout","replace","catch","error","removeItem","checkUser","posts_count","comments_count","likes_count","push"],"mappings":"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","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { sendGetAdminApi, sendPostApi } from \"src/service/appService\";\r\nimport { loginStoreAction } from \"./store\";\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  loggedInData: {\r\n    userId: 0,\r\n    name: \"\",\r\n    token: null,\r\n    role_id: \"none\",\r\n    isDataReceived: false,\r\n    image: \"\",\r\n    posts: 0,\r\n    comments: 0,\r\n    likes: 0,\r\n  },\r\n  message: {\r\n    msg: \"\",\r\n    color: \"\",\r\n    isLoggedIn: false,\r\n  },\r\n  admin: false,\r\n};\r\n\r\nconst loginSlice = createSlice({\r\n  name: \"login\",\r\n  initialState,\r\n  reducers: {\r\n    logout(state) {\r\n      state.loggedInData = {\r\n        userId: \"\",\r\n        name: \"\",\r\n        token: null,\r\n        role_id: \"none\",\r\n        image: \"\",\r\n        posts: 0,\r\n        comments: 0,\r\n        likes: 0,\r\n      };\r\n      state.message = {\r\n        msg: \"\",\r\n        color: \"\",\r\n        isLoggedIn: false,\r\n      };\r\n    },\r\n    updateProfileImage(state, action) {\r\n      state.loggedInData = {\r\n        ...state.loggedInData,\r\n        image: action.payload.url,\r\n      };\r\n    },\r\n    sendLoginRequest(state) {\r\n      state.isLoading = true;\r\n      state.message = {\r\n        ...state.message,\r\n        msg: \"Authenticating......\",\r\n        color: \"success\",\r\n        isLoggedIn: true,\r\n      };\r\n    },\r\n\r\n    getLoginErrorResponse(state, action) {\r\n      state.isLoading = false;\r\n      state.message = {\r\n        ...state.message,\r\n        msg: action.payload.msg,\r\n        color: action.payload.color,\r\n        isLoggedIn: true,\r\n      };\r\n    },\r\n    getLoginSuccessResponse(state, action) {\r\n      state.isLoading = false;\r\n      state.message = {\r\n        ...state.message,\r\n        msg: action.payload.msg,\r\n        color: action.payload.color,\r\n        isLoggedIn: true,\r\n      };\r\n      state.loggedInData = {\r\n        ...state.loggedInData,\r\n        name: action.payload.name,\r\n        image: action.payload.image,\r\n        role_id: action.payload.role_id,\r\n        posts: action.payload.posts,\r\n        comments: action.payload.comments,\r\n        likes: action.payload.likes,\r\n        userId: action.payload.userId,\r\n      };\r\n    },\r\n    updateToken(state, action) {\r\n      state.loggedInData = {\r\n        ...state.loggedInData,\r\n        token: action.payload.token,\r\n      };\r\n    },\r\n    checkUserLoggedIn(state, action) {\r\n      state.loggedInData = {\r\n        ...state.loggedInData,\r\n        name: action.payload.name,\r\n        role_id: action.payload.role_id,\r\n        isDataReceived: true,\r\n        image: action.payload.image,\r\n        posts: action.payload.posts,\r\n        comments: action.payload.comments,\r\n        likes: action.payload.likes,\r\n        userId: action.payload.userId,\r\n      };\r\n    },\r\n  },\r\n});\r\nexport default loginSlice;\r\n\r\nexport const LoginRequest = (data, history) => {\r\n  return (dispatch) => {\r\n    dispatch(loginStoreAction.sendLoginRequest());\r\n\r\n    sendPostApi(\"user/login\", data)\r\n      .then((response) => {\r\n        localStorage.setItem(\"token\", response.data.data.token);\r\n        dispatch(\r\n          loginStoreAction.getLoginSuccessResponse({\r\n            msg: \"Authentication Successfull:Rediracting to Admin Panel!!\",\r\n            color: \"success\",\r\n            name: response.data.data.name,\r\n            role_id: response.data.data.roles,\r\n            image: response.data.data.profile_photo_path,\r\n            posts: response.data.data.posts,\r\n            comments: response.data.data.comments,\r\n            likes: response.data.data.likes,\r\n            userId: response.data.data.id,\r\n          })\r\n        );\r\n        setTimeout(() => {\r\n          dispatch(\r\n            loginStoreAction.updateToken({\r\n              token: response.data.data.token,\r\n            })\r\n          );\r\n          history.replace(\"/admin\");\r\n        }, 2000);\r\n      })\r\n      .catch((error) => {\r\n        dispatch(\r\n          loginStoreAction.getLoginErrorResponse({\r\n            msg: error.response.data.error,\r\n            color: \"danger\",\r\n          })\r\n        );\r\n      });\r\n  };\r\n};\r\nexport const logout = () => {\r\n  return (dispatch) => {\r\n    localStorage.removeItem(\"token\");\r\n    dispatch(loginStoreAction.logout());\r\n  };\r\n};\r\n\r\nexport const checkUser = (history) => {\r\n  return (dispatch) => {\r\n    sendGetAdminApi(\"users/get-a-user\")\r\n      .then((response) => {\r\n        //console.log(\"hi\", response.data.data.id);\r\n        dispatch(\r\n          loginStoreAction.checkUserLoggedIn({\r\n            name: response.data.data.name,\r\n            role_id: response.data.data.roles,\r\n            image: response.data.data.profile_photo_path,\r\n            posts: response.data.data.posts_count,\r\n            comments: response.data.data.comments_count,\r\n            likes: response.data.data.likes_count,\r\n            userId: response.data.data.id,\r\n          })\r\n        );\r\n      })\r\n      .catch((error) => {\r\n        history.push(\"/\");\r\n      });\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}